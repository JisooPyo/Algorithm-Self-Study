# Hash Table

## Design a Hash Table

### The Principle of Hash Table

> 해시테이블의 원리

`해시 테이블`은 `빠른 삽입과 탐색`을 지원하기 위해 `해시 함수`를 사용해서 데이터를 분류하는 자료 구조이다. 해시테이블의 원리를 살펴보자.

해시 테이블의 주요 아이디어는 `키와 버킷을 매핑하는` 해시 함수를 사용하는 것이다. 더 구체적으로 얘기하자면,

1. 새로운 키를 삽입하려고 할 때, 해시 함수는 키가 할당되어야 할 버킷을 결정한다. 그리고 키는 해당 버킷에 저장된다.
2. 키를 탐색하려고 할 때, 해시 테이블은 `같은` 해시 함수를 사용하여 해당 버킷을 찾고 특정 버킷에서만 검색한다.

* 예시

<img src="https://s3-lc-upload.s3.amazonaws.com/uploads/2018/02/20/screen-shot-2018-02-19-at-183537.png" width="400px"/>

이 예시에서 우리는 `y = x % 5`를 해시 함수로써 사용할 것이다. 우리는 삽입, 탐색 전략을 살펴볼 것이다.

1. 삽입: 우리는 해당 버킷에 키들을 매핑하기 위해 해시 함수를 통하여 키들을 파싱한다.
    * 1987은 버킷 2에 할당되고 24는 버킷 4에 할당된다.
2. 탐색: 같은 해시 함수를 통하여 키들을 파싱한 뒤, 특정 버킷에서 검색한다.
    * 1987을 검색할 경우, 같은 해시 함수를 사용하여 1987을 2로 매핑한다. 그리고 버킷 2에서 탐색하면 성공적으로 해당 버킷에서 1987을 찾을 수 있다.
    * 23을 검색할 경우, 23을 3에 매핑한 후, 버킷 3에서 탐색한다. 버킷 3에서 23을 찾을 수 없고, 그것은 해시 테이블에 23이 없다는 것을 뜻한다.

<br>

### Keys to Design a Hash Table

해시 테이블을 디자인할 때 유의해야 할 두 필수 요소가 있다.

> 해시 함수(Hash Function)

해시 함수는 해시 테이블의 가장 중요한 요소이며, 키에 특정한 버킷을 매핑할 때 사용된다. 예를 들어 앞에서는 `y = x % 5`를 해시 함수로 사용하였다. 여기서 x는 키의 값이고, y는 할당된 버킷의
인덱스이다.

해시 함수는 `키 값의 범위`와 `버킷의 개수`에 의존한다.

여기 몇 가지 예시와 해시 함수가 있다.

<img src="https://s3-lc-upload.s3.amazonaws.com/uploads/2018/05/04/screen-shot-2018-05-04-at-145454.png" width="900px">

해시 함수를 설계하는 것은 미해결문제이다. 설계 아이디어는 `가능한 획일적으로` 키를 버킷에 할당하는 것을 시도하는 것이다. 이상적으로, 완벽한 해시 함수는 키와 버킷 사이에 1대 1 매핑이 될 것이다. 그러나
대부분의 케이스에서 해시 함수는 완벽하지 않고, `버킷의 개수`과 `버킷의 수용량` 사이에 tradeoff가 존재한다.

> 충돌 해결(Collision Resolution)

이상적으로, 만약 해시 함수가 완벽한 `1대 1 매핑`이라고 하면, 충돌을 핸들링할 필요가 없다. 불행하게도 대부분의 케이스에서, 충돌은 `불가피`하다. 예를 들어, 이전의 해시 함수 `y = x % 5`에서,
1987과 2 모두 버킷 2에 할당이 된다. 이것이 `충돌`이다.

충돌 해결 알고리즘은 다음 질문을 해결해야만 한다.

1. 어떻게 동일한 버킷에 값들을 구성하는가?
2. 만약 동일한 버킷에 너무 많은 값들이 할당되면 어떻게 되는가?
3. 어떻게 타겟팅한 값을 특정 버킷에서 탐색하는가?

이러한 질문들은 `버킷의 수용량`과 해시 함수에 따라서 같은 버킷에 할당되는 `키의 개수`와 관계되어 있다.

버킷이 N개(키의 최대개수)의 키를 가지고 있다고 가정하자.

일반적으로, 만약 N이 상수이고 값이 작다면, 간단하게 같은 버킷내에 키를 저장하기 위해 `배열`을 사용할 수 있다. 만약 N이 가변적이고 값이 크다면, 배열 대신 `높이-균형 이진 탐색 트리`가 필요할 것이다.